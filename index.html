<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weather â€” Masterpiece Edition</title>

<style>
/* ===================== THEME ===================== */
:root{
  --bg: linear-gradient(160deg,#74ebd5,#9face6);
  --bg-dark: linear-gradient(160deg,#0f2027,#203a43,#000);

  --glass: rgba(255,255,255,.18);
  --glass-dark: rgba(255,255,255,.1);
  --border: rgba(255,255,255,.25);
  --text:#fff;

  --sun:#ffd27d;
  --wind:#5ee7df;
  --humidity:#7aa2ff;
  --pressure:#c77dff;
}

[data-theme="dark"]{
  --glass:var(--glass-dark);
}

/* ===================== BASE ===================== */
*{margin:0;padding:0;box-sizing:border-box}
body{
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:Inter,system-ui,sans-serif;
  transition:background 1s ease;
  overflow-x:hidden;
}
[data-theme="dark"] body{
  background:var(--bg-dark);
}

/* Subtle animated background */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:radial-gradient(1200px at 10% 10%,rgba(255,255,255,.12),transparent 60%);
  animation:bgDrift 20s linear infinite alternate;
  pointer-events:none;
}

/* ===================== LAYOUT ===================== */
.app{
  min-height:100vh;
  padding:30px 36px 90px;
  display:grid;
  gap:32px;
}

/* ===================== TOP ===================== */
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.city{
  font-size:30px;
  font-weight:600;
}
.controls{
  display:flex;
  gap:12px;
}
.controls input{
  padding:12px 16px;
  border-radius:14px;
  border:none;
}
.controls button{
  padding:12px 16px;
  border-radius:14px;
  border:none;
  background:var(--glass);
  color:var(--text);
  cursor:pointer;
}

/* ===================== HERO ===================== */
.hero{
  display:flex;
  align-items:center;
  gap:60px;
}
.temp{
  font-size:96px;
  font-weight:800;
  color:var(--sun);
}
.desc{
  font-size:22px;
  opacity:.9;
}

/* ===================== MAIN ICON ===================== */
.visual{
  width:240px;
  height:240px;
  position:relative;
}
.sun{
  width:140px;height:140px;
  border-radius:50%;
  background:radial-gradient(circle,#ffe29f,#ffa751);
  position:absolute;inset:0;margin:auto;
  animation:sunSpin 28s linear infinite, sunGlow 6s ease-in-out infinite;
}
.moon{
  width:130px;height:130px;
  border-radius:50%;
  background:#f4f1c9;
  box-shadow:-36px 0 0 rgba(0,0,0,.35);
  position:absolute;inset:0;margin:auto;
}

/* ===================== SECTION TITLE ===================== */
.section{
  font-size:13px;
  letter-spacing:.14em;
  opacity:.65;
}

/* ===================== CURRENT CONDITIONS ===================== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:22px;
}
.info{
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:22px;
  padding:18px;
  cursor:pointer;
  transition:.45s cubic-bezier(.4,0,.2,1);
  animation:cardBreath 6s ease-in-out infinite;
}
.info:hover{
  transform:translateY(-6px) scale(1.02);
}
.info-header{
  display:flex;
  gap:12px;
  align-items:center;
}
.info-header strong{
  font-size:24px;
}

/* Expand animation */
.expand{
  display:grid;
  grid-template-rows:0fr;
  transition:grid-template-rows .45s cubic-bezier(.4,0,.2,1);
}
.info.open .expand{
  grid-template-rows:1fr;
}
.expand > div{
  overflow:hidden;
  opacity:0;
  transform:translateY(8px);
  transition:.4s ease;
}
.info.open .expand > div{
  opacity:1;
  transform:none;
  margin-top:12px;
  font-size:14px;
  line-height:1.5;
}

/* ===================== HOURLY (UNCHANGED LOGIC) ===================== */
.forecast{
  display:flex;
  gap:18px;
  overflow-x:auto;
}
.hour{
  min-width:160px;
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:22px;
  padding:16px;
  cursor:pointer;
  display:grid;
  grid-template-rows:auto auto auto 0fr;
  transition:.45s cubic-bezier(.4,0,.2,1);
}
.hour:hover{
  transform:scale(1.08);
}
.hour.open{
  grid-template-rows:auto auto auto 1fr;
}
.hour .expand{
  overflow:hidden;
  opacity:0;
  transform:translateY(8px);
  transition:.4s ease;
}
.hour.open .expand{
  opacity:1;
  transform:none;
  margin-top:10px;
}

/* ===================== ATMOSPHERE ===================== */
.atmosphere{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}

/* ===================== ANIMATIONS ===================== */
@keyframes sunSpin{to{transform:rotate(360deg)}}
@keyframes sunGlow{
  0%{box-shadow:0 0 30px rgba(255,200,80,.4)}
  50%{box-shadow:0 0 80px rgba(255,200,80,1)}
  100%{box-shadow:0 0 30px rgba(255,200,80,.4)}
}
@keyframes cardBreath{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.005)}
}
@keyframes bgDrift{
  from{transform:translateX(0)}
  to{transform:translateX(-120px)}
}

@media(max-width:768px){
  .hero{flex-direction:column;align-items:flex-start}
  .temp{font-size:72px}
}
</style>
</head>

<body>
<div class="app">

  <div class="top">
    <div class="city" id="city">â€”</div>
    <div class="controls">
      <input id="cityInput" placeholder="Search city">
      <button onclick="search()">Search</button>
      <button onclick="toggleTheme()">ğŸŒ“</button>
    </div>
  </div>

  <div class="hero">
    <div>
      <div class="temp" id="temp">â€”Â°C</div>
      <div class="desc" id="desc">â€”</div>
    </div>
    <div class="visual" id="visual"></div>
  </div>

  <div class="section">CURRENT CONDITIONS</div>
  <div class="grid">
    <div class="info" onclick="this.classList.toggle('open')">
      ğŸŒ¬ï¸ <strong id="wind">â€”</strong>
      <div class="expand"><div>
        Wind affects cooling and perceived temperature.<br>
        Stronger winds feel colder in winter and cooler in summer.
      </div></div>
    </div>

    <div class="info" onclick="this.classList.toggle('open')">
      ğŸ’§ <strong id="humidity">â€”</strong>
      <div class="expand"><div>
        High humidity reduces sweat evaporation and increases discomfort.
      </div></div>
    </div>

    <div class="info" onclick="this.classList.toggle('open')">
      ğŸ“ˆ <strong id="pressure">â€”</strong>
      <div class="expand"><div>
        Falling pressure often signals storms or rain.
      </div></div>
    </div>

    <div class="info" onclick="this.classList.toggle('open')">
      ğŸŒ¡ï¸ <strong id="feels">â€”</strong>
      <div class="expand"><div>
        Calculated using temperature, humidity, and wind speed.
      </div></div>
    </div>
  </div>

  <div class="section">HOURLY FORECAST</div>
  <div class="forecast" id="forecast"></div>

  <div class="section">ATMOSPHERE</div>
  <div class="atmosphere">
    <div class="info">ğŸŒ« Visibility <strong id="visibility">â€”</strong></div>
    <div class="info">ğŸ§ Comfort Index <strong id="comfort">â€”</strong></div>
    <div class="info">ğŸ§­ Wind Category <strong id="windCat">â€”</strong></div>
    <div class="info">ğŸŒ— Day / Night <strong id="dayState">â€”</strong></div>
  </div>

</div>

<script>
let dark=false;
function toggleTheme(){
  dark=!dark;
  document.documentElement.dataset.theme=dark?"dark":"";
}

async function search(){
  const city=cityInput.value.trim();
  if(!city) return;

  const geo=await fetch(
    `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`
  ).then(r=>r.json());
  if(!geo.results) return;

  const {latitude,longitude,name}=geo.results[0];

  const url=
    `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}`+
    `&current_weather=true`+
    `&hourly=temperature_2m,relativehumidity_2m,pressure_msl,windspeed_10m`+
    `&timezone=auto`;

  const data=await fetch(url).then(r=>r.json());
  render(data,name);
}

function render(data,name){
  city.textContent=name;
  temp.textContent=Math.round(data.current_weather.temperature)+"Â°C";
  desc.textContent="Live weather conditions";

  wind.textContent=data.current_weather.windspeed+" km/h";
  humidity.textContent=data.hourly.relativehumidity_2m[0]+"%";
  pressure.textContent=data.hourly.pressure_msl[0]+" hPa";
  feels.textContent=temp.textContent;

  visibility.textContent="10+ km";
  comfort.textContent=data.current_weather.temperature>30?"Hot":"Comfortable";
  windCat.textContent=data.current_weather.windspeed>20?"Windy":"Breezy";
  dayState.textContent=data.current_weather.is_day?"Day":"Night";

  visual.innerHTML=data.current_weather.is_day
    ?'<div class="sun"></div>'
    :'<div class="moon"></div>';

  forecast.innerHTML="";
  for(let i=0;i<24;i+=3){
    const h=document.createElement("div");
    h.className="hour";
    h.innerHTML=`
      <div>${data.hourly.time[i].split("T")[1]}</div>
      <div>${Math.round(data.hourly.temperature_2m[i])}Â°</div>
      <div class="expand">
        ğŸ’§ ${data.hourly.relativehumidity_2m[i]}%<br>
        ğŸ“ˆ ${Math.round(data.hourly.pressure_msl[i])} hPa<br>
        ğŸŒ¬ ${data.hourly.windspeed_10m[i]} km/h
      </div>`;
    h.onclick=()=>h.classList.toggle("open");
    forecast.appendChild(h);
  }
}
</script>
</body>
</html>
